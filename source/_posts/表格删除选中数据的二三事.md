---
title: 表格删除选中数据的二三事
date: 2022-03-31 10:17:52
categories:
- 项目
tags:
- 项目
---
## 0.需求场景

最近项目中遇到一个问题，删除表格中选中的数据【注意：选中过程中不能删除，只能在最终点击删除按钮时，执行删除操作】。

![](https://cdn.jsdelivr.net/gh/qw-null/BlogImages/20220331103520.png)

## 1.需求转化
实际上这个问题相当于一道算法题目。
给定一个数组```A = [9,8,7,6,5,4,2,3,1]```和表示数组下标的数组```B = [2,4,3]```，请删除```A```中下标在```B```中的元素。
```javascript
输入：[9,8,7,6,5,4,2,3,1],[2,4,3,7]
输出：[9,8,4,2,1]
```
## 2.解题思路
这道问题的难点在于删除数组元素时，需要保证每次删除数组元素时，数组元素的位置不能变。

解决问题的思路：
1. 使用```Array.filter()```

先将数组进行重新封装，封装成如下格式：
```json
[{
  "value" : xxx,
  "index" : xxx 
}]
```
然后使用```Array.filter()```进行删除元素。

```javascript
let arr = [
      {
        productId: 1,
        productName: '电视机',
        num: 20
      }, {
        productId: 2,
        productName: '洗衣机',
        num: 0
      }, {
        productId: 3,
        productName: '冰箱',
        num: 50
      }, {
        productId: 4,
        productName: '空调',
        num: 0
      },
    ]
    arr = arr.filter(item => {
      return item.num != 0
    })
    console.log(arr)

```
结果：
![](https://cdn.jsdelivr.net/gh/qw-null/BlogImages/20220331132547.png)

2. 使用```map.has()```
将数组```B```转化为```map```，循环数组```A```，判断数组```A```的下标值是否包含在数组```B```转化的```map```中。